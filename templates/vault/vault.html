{% extends 'base.html' %}
{% load static %}

{% block title %}My Drive - SkyVault{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'vault/vault.css' %}">
{% endblock %}

{% block content %}
<div class="drive-container">
    <!-- Top bar with File and Folder options -->
    {% comment %} <div class="top-bar">
        <button onclick="openFolderModal()">New Folder</button>
        <button onclick="openFileModal()">Upload File</button>
        <input type="text" placeholder="Search in Drive" class="search-input">
    </div> {% endcomment %}

    <!-- Files and Folders Grid -->
    <div class="file-grid">
        {% for file in files %}
        <div class="file-item">
            {% if file.is_folder %}
                <img src="{% static 'icons/folder-icon.png' %}" alt="Folder Icon">
            {% else %}
                <img src="{% static 'icons/file-icon.png' %}" alt="File Icon">
            {% endif %}
            <p>{{ file.name }}</p>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Modals for Upload File and New Folder -->
<div id="folderModal" class="modal">
    <form method="post" action="{% url 'create_folder' %}">
        {% csrf_token %}
        <label for="folderName">Folder Name:</label>
        <input type="text" id="folderName" name="folder_name" required>
        <button type="submit">Create</button>
        <button type="button" onclick="closeFolderModal()">Cancel</button>
    </form>
</div>

<div id="fileModal" class="modal">
    <form method="post" action="{% url 'upload_file' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="uploadedFile">Choose File:</label>
        <input type="file" id="uploadedFile" name="uploaded_file" required>
        <button type="submit">Upload</button>
        <button type="button" onclick="closeFileModal()">Cancel</button>
    </form>
</div>

<script>
    function openFolderModal() { document.getElementById("folderModal").style.display = "block"; }
    function closeFolderModal() { document.getElementById("folderModal").style.display = "none"; }
    function openFileModal() { document.getElementById("fileModal").style.display = "block"; }
    function closeFileModal() { document.getElementById("fileModal").style.display = "none"; }
</script>
{% endblock %}
